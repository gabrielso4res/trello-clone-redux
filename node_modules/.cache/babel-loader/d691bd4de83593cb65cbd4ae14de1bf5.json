{"ast":null,"code":"import { CONSTANTS } from \"../actions\";\nimport { loadLists } from \"../api\";\nlet listID = 2;\nlet cardID = 5;\nconst initialState = loadLists();\n\nconst listsReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case CONSTANTS.ADD_LIST:\n      const newList = {\n        title: action.payload,\n        cards: [],\n        id: `list-${listID}`\n      };\n      listID += 1;\n      return [...state, newList];\n\n    case CONSTANTS.ADD_CARD:\n      {\n        const newCard = {\n          text: action.payload.text,\n          id: `card-${cardID}`\n        };\n        cardID += 1;\n        const newState = state.map(list => {\n          if (list.id === action.payload.listID) {\n            return { ...list,\n              cards: [...list.cards, newCard]\n            };\n          } else {\n            return list;\n          }\n        });\n        return newState;\n      }\n\n    case CONSTANTS.DRAG_HAPPENED:\n      const newState = [...state];\n      const {\n        droppableIdStart,\n        droppableIdEnd,\n        droppableIndexStart,\n        droppableIndexEnd,\n        type\n      } = action.payload;\n\n      if (type === \"list\") {\n        const list = newState.splice(droppableIdStart, 1);\n        newState.splice(droppableIndexEnd, 0, ...list);\n        return newState;\n      }\n\n      if (droppableIdStart === droppableIdEnd) {\n        const list = state.find(list => droppableIdStart === list.id);\n        const card = list.cards.splice(droppableIndexStart, 1);\n        list.cards.splice(droppableIndexEnd, 0, ...card);\n      }\n\n      if (droppableIdStart !== droppableIdEnd) {\n        const listStart = state.find(list => droppableIdStart === list.id);\n        const card = listStart.cards.splice(droppableIndexStart, 1);\n        const listEnd = state.find(list => droppableIdEnd === list.id);\n        listEnd.cards.splice(droppableIndexEnd, 0, ...card);\n      }\n\n      return newState;\n\n    default:\n      return state;\n  }\n};\n\nexport default listsReducer;","map":{"version":3,"sources":["/home/gabriel/Downloads/Trello-react-redux-react-dnd-master/src/reducers/listsReducer.js"],"names":["CONSTANTS","loadLists","listID","cardID","initialState","listsReducer","state","action","type","ADD_LIST","newList","title","payload","cards","id","ADD_CARD","newCard","text","newState","map","list","DRAG_HAPPENED","droppableIdStart","droppableIdEnd","droppableIndexStart","droppableIndexEnd","splice","find","card","listStart","listEnd"],"mappings":"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","sourcesContent":["import { CONSTANTS } from \"../actions\";\nimport { loadLists } from \"../api\";\n\nlet listID = 2;\nlet cardID = 5;\n\nconst initialState = loadLists();\n\nconst listsReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case CONSTANTS.ADD_LIST:\n      const newList = {\n        title: action.payload,\n        cards: [],\n        id: `list-${listID}`,\n      };\n      listID += 1;\n      return [...state, newList];\n\n    case CONSTANTS.ADD_CARD: {\n      const newCard = {\n        text: action.payload.text,\n        id: `card-${cardID}`,\n      };\n      cardID += 1;\n\n      const newState = state.map((list) => {\n        if (list.id === action.payload.listID) {\n          return {\n            ...list,\n            cards: [...list.cards, newCard],\n          };\n        } else {\n          return list;\n        }\n      });\n\n      return newState;\n    }\n\n    case CONSTANTS.DRAG_HAPPENED:\n      const newState = [...state];\n      const {\n        droppableIdStart,\n        droppableIdEnd,\n        droppableIndexStart,\n        droppableIndexEnd,\n        type,\n      } = action.payload;\n\n      if (type === \"list\") {\n        const list = newState.splice(droppableIdStart, 1);\n        newState.splice(droppableIndexEnd, 0, ...list);\n        return newState;\n      }\n\n      if (droppableIdStart === droppableIdEnd) {\n        const list = state.find((list) => droppableIdStart === list.id);\n        const card = list.cards.splice(droppableIndexStart, 1);\n        list.cards.splice(droppableIndexEnd, 0, ...card);\n      }\n\n      if (droppableIdStart !== droppableIdEnd) {\n        const listStart = state.find((list) => droppableIdStart === list.id);\n        const card = listStart.cards.splice(droppableIndexStart, 1);\n        const listEnd = state.find((list) => droppableIdEnd === list.id);\n        listEnd.cards.splice(droppableIndexEnd, 0, ...card);\n      }\n      return newState;\n\n    default:\n      return state;\n  }\n};\n\nexport default listsReducer;\n"]},"metadata":{},"sourceType":"module"}